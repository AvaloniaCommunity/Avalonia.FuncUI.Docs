<html class="has-navbar-fixed-top">
  <head>
    <meta charSet="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <meta name="theme-color" content="#ffffff"/>
    <meta name="msapplication-TileColor" content="#ffffff"/>
    <meta name="msapplication-TileImage" content="/Avalonia.FuncUI.Docs/images/ms-icon-144x144.png"/>
    <title>
      Avalonia.FuncUI
    </title>
    <link rel="manifest" href="/manifest.json"/>
    <link rel="icon" type="image/png" sizes="32x32" href="/Avalonia.FuncUI.Docs/images/favicon.png"/>
    <link rel="apple-touch-icon" sizes="57x57" href="/Avalonia.FuncUI.Docs/images/apple-icon-57x57.png"/>
    <link rel="apple-touch-icon" sizes="60x60" href="/Avalonia.FuncUI.Docs/images/apple-icon-60x60.png"/>
    <link rel="apple-touch-icon" sizes="72x72" href="/Avalonia.FuncUI.Docs/images/apple-icon-72x72.png"/>
    <link rel="apple-touch-icon" sizes="76x76" href="/Avalonia.FuncUI.Docs/images/apple-icon-76x76.png"/>
    <link rel="apple-touch-icon" sizes="114x114" href="/Avalonia.FuncUI.Docs/images/apple-icon-114x114.png"/>
    <link rel="apple-touch-icon" sizes="120x120" href="/Avalonia.FuncUI.Docs/images/apple-icon-120x120.png"/>
    <link rel="apple-touch-icon" sizes="144x144" href="/Avalonia.FuncUI.Docs/images/apple-icon-144x144.png"/>
    <link rel="apple-touch-icon" sizes="152x152" href="/Avalonia.FuncUI.Docs/images/apple-icon-152x152.png"/>
    <link rel="apple-touch-icon" sizes="180x180" href="/Avalonia.FuncUI.Docs/images/apple-icon-180x180.png"/>
    <link rel="icon" type="image/png" sizes="192x192" href="/Avalonia.FuncUI.Docs/images/android-icon-192x192.png"/>
    <link rel="icon" type="image/png" sizes="32x32" href="/Avalonia.FuncUI.Docs/images/favicon-32x32.png"/>
    <link rel="icon" type="image/png" sizes="96x96" href="/Avalonia.FuncUI.Docs/images/favicon-96x96.png"/>
    <link rel="icon" type="image/png" sizes="16x16" href="/Avalonia.FuncUI.Docs/images/favicon-16x16.png"/>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"/>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans"/>
    <link rel="stylesheet" href="https://unpkg.com/bulma@0.8.0/css/bulma.min.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.19.0/themes/prism-coy.min.css"/>
    <link rel="stylesheet" type="text/css" href="/Avalonia.FuncUI.Docs/style/style.css"/>
    <base href="/Avalonia.FuncUI.Docs/"/>
  </head>
  <body>
    <nav class="navbar is-funcui is-fixed-top">
      <div class="container">
        <div class="navbar-brand">
          <a class="navbar-item brand-link" href="/Avalonia.FuncUI.Docs/">
            <img src="https://raw.githubusercontent.com/AvaloniaCommunity/Avalonia.FuncUI/master/github/img/logo/FuncUI.png" alt="Logo"/>
          </a>
          <span class="navbar-burger burger" data-target="navbarMenu">
            <span></span>
            <span></span>
            <span></span>
          </span>
        </div>
        <div id="navbarMenu" class="navbar-menu">
          <a class="navbar-item is-light" href="">
            Home
          </a>
          <a class="navbar-item is-light" href="blog.html">
            Blog
          </a>
          <a class="navbar-item is-light" href="guides.html">
            Guides
          </a>
          <a class="navbar-item is-light" href="release-notes.html">
            Release Notes
          </a>
          <a class="navbar-item is-light" href="about.html">
            About
          </a>
        </div>
      </div>
    </nav>
    <main class="main-content">
      <aside class="menu main-menu">
        <p class="menu-label">
          Guides
        </p>
        <ul class="menu-list">
          <li>
            <a href="guides/Home.html">
              Getting Started
            </a>
          </li>
          <li>
            <a href="guides/Basic-Template.html">
              Basic Template
            </a>
          </li>
          <li>
            <a href="guides/Full-Template.html">
              Full Template
            </a>
          </li>
          <li>
            <a href="guides/Quickstart-Template.html">
              Quickstart Template
            </a>
          </li>
          <li>
            <a href="guides/Views-and-Attributes.html">
              Views And Attributes
            </a>
          </li>
          <li>
            <a href="guides/Components.html">
              Components
            </a>
          </li>
          <li>
            <a href="guides/Unit-Testing-Avalonia-FuncUI-Apps.html">
              Unit Testing Avalonia.FuncUI
            </a>
          </li>
          <li>
            <a href="guides/Hooks.html">
              Hooks
            </a>
          </li>
          <li>
            <a href="guides/Bindings.html">
              How to create bindings
            </a>
          </li>
        </ul>
        <p class="menu-label">
          Documentation
        </p>
        <ul class="menu-list">
          <li>
            <a>
              Controls
            </a>
            <ul>
              <li>
                <a href="controls/Border.html">
                  Border
                </a>
              </li>
              <li>
                <a href="controls/Button.html">
                  Button
                </a>
              </li>
              <li>
                <a href="controls/Calendar.html">
                  Calendar
                </a>
              </li>
              <li>
                <a href="controls/CalendarDatePicker.html">
                  CalendarDatePicker
                </a>
              </li>
              <li>
                <a href="controls/CheckBox.html">
                  CheckBox
                </a>
              </li>
              <li>
                <a href="controls/DatePicker.html">
                  DatePicker
                </a>
              </li>
              <li>
                <a href="controls/DockPanel.html">
                  DockPanel
                </a>
              </li>
              <li>
                <a href="controls/Expander.html">
                  Expander
                </a>
              </li>
              <li>
                <a href="controls/ListBox.html">
                  ListBox
                </a>
              </li>
              <li>
                <a href="controls/Menu.html">
                  Menu
                </a>
              </li>
              <li>
                <a href="controls/NativeMenu.html">
                  NativeMenu
                </a>
              </li>
              <li>
                <a href="controls/NumericUpDown.html">
                  NumericUpDown
                </a>
              </li>
              <li>
                <a href="controls/ProgressBar.html">
                  ProgressBar
                </a>
              </li>
              <li>
                <a href="controls/RadioButton.html">
                  RadioButton
                </a>
              </li>
              <li>
                <a href="controls/RepeatButton.html">
                  RepeatButton
                </a>
              </li>
              <li>
                <a href="controls/Slider.html">
                  Slider
                </a>
              </li>
              <li>
                <a href="controls/StackPanel.html">
                  StackPanel
                </a>
              </li>
              <li>
                <a href="controls/Tabs.html">
                  TabControl
                </a>
              </li>
              <li>
                <a href="controls/TextBlock.html">
                  TextBlock
                </a>
              </li>
              <li>
                <a href="controls/TextBox.html">
                  TextBox
                </a>
              </li>
              <li>
                <a href="controls/TimePicker.html">
                  TimePicker
                </a>
              </li>
              <li>
                <a href="controls/ToggleButton.html">
                  ToggleButton
                </a>
              </li>
              <li>
                <a href="controls/ToggleSwitch.html">
                  ToggleSwitch
                </a>
              </li>
            </ul>
          </li>
        </ul>
        <p class="menu-label">
          Release Notes
        </p>
        <ul class="menu-list"></ul>
      </aside>
      <div class="page-content">
        <a class="edit-page button is-small is-link is-outlined" href="https://github.com/AvaloniaCommunity/Avalonia.FuncUI.Docs/blob/master/src/guides/Hooks.md">
          <i class="fa fa-pencil-square-o"></i>
           Edit this page
        </a>
        <article class="guide box">
          <header class="guide-header">
            <h1 class="title">
              Hooks
            </h1>
            <h4 class="subtitle">
              Avalonia Community
            </h4>
            <section class="tags"></section>
          </header>
          <section class="guide-content content">
            <blockquote>
<p>Hooks can only be used with <a href="guides/Components.html">Components</a>, so feel free to check them out first before reviewing this page.</p>
</blockquote>
<h2 id="usestate">useState</h2>
<p>This is the most basic hook which allows you to create an instance of a value which can be both read and updated in your component's code, the state is kept between renders and any updates to it will cause it to re-render by default</p>
<pre><code class="language-fsharp">Component(fun ctx -&gt;
    let state = ctx.useState 0
    // Component's UI
)
</code></pre>
<h2 id="useelmish">useElmish</h2>
<p>WIP</p>
<h2 id="useeffect">useEffect</h2>
<p>Sometimes you need to subscribe to an observable, to an <code>IWritable&lt;'T&gt;</code>, create a disposable value, or make some logging. For these and other scenarios you can use the <code>useEffect</code> hook.</p>
<p>This hook requires a <code>handler</code> which is a function that can return <code>unit</code> or <code>IDisposable</code> depending on your needs. For cases where you need to handle subscriptions the second will be better.</p>
<p>This hook also asks for a <code>triggers</code> list, these help Avalonia.FuncUI to decide when to run the handler function. The possible trigger values are defined as follows:</p>
<pre><code class="language-fsharp">[&lt;RequireQualifiedAccess&gt;]
type EffectTrigger =
    /// triggers the effect to run every time after the passed dependency has changed.
    | AfterChange of state: IAnyReadable
    /// triggers the effect to run once after the component initially rendered.
    | AfterInit
    /// triggers the effect to run every time after the component is rendered.
    | AfterRender
</code></pre>
<p>For example if we had to fetch some resources from a server after the component is initialized we would do something like the following:</p>
<pre><code class="language-fsharp">Component(&quot;use-effect-component&quot;, fun ctx -&gt;
    let names = ctx.useState []
    let count = ctx.useState 0
    ctx.useEffect (
        handler = (fun _ -&gt;
            // Common use cases here are HTTP Requests, Event and Observable Subscriptions
            // or any other code that could be considered a side effect
            async {
                let! nameList = httpLib.get &quot;https://my-resources.com&quot;
                // update the names value
                names.Set nameList
            }
            |&gt; Async.Start
        ),
        triggers = [ EffectTrigger.AfterInit ]
    )
    // DSL code
)
</code></pre>
<p>We can also re-execute these handlers if we make them dependant of any readable values, for example let us try to compute the sum of the ages of a user list whenever the user list changes.</p>
<pre><code class="language-fsharp">Component(&quot;use-effect-component&quot;, fun ctx -&gt;
    let users = ctx.useState []
    let ageSum = ctx.useState 0
    ctx.useEffect (
        handler = (fun _ -&gt;
            // Common use cases here are HTTP Requests, Event and Observable Subscriptions
            // or any other code that could be considered a side effect
            async {
                let! nameList = httpLib.get &quot;https://my-resources.com&quot;
                // update the names value
                names.Set nameList
            }
            |&gt; Async.Start
        ),
        triggers = [ EffectTrigger.AfterInit ]
    )
    ctx.useEffect(
        handler = (fun _ -&gt;
            // get sum of the ages of the users list
            users
            |&gt; List.sumBy (fun user -&gt; user.age)
            |&gt; ageSum.Set
        ),
        // whenever the users list changes, trigger this effect
        triggers = [ EffectTrigger.AfterChange users ]
    )
)
</code></pre>
<h2 id="ireadablet">IReadable&lt;'T&gt;</h2>
<pre><code class="language-fsharp">type IReadable&lt;'value&gt; =
    inherit IAnyReadable
    abstract member Current: 'value with get
    abstract member Subscribe : ('value -&gt; unit) -&gt; IDisposable
</code></pre>
<p>As is in the source comments:</p>
<blockquote>
<p>Readable state value that can be subscribed to.</p>
</blockquote>
<p>Readables are values which you can subscribe to get updates, this are common values used</p>
<p>An example would be the following</p>
<pre><code class="language-fsharp">Component(fun ctx -&gt;
    let state = ctx.useState 0

    Button.create [
        Button.content $&quot;Count: {state.Current}&quot;
    ]
)
</code></pre>
<p>At this point this component will be pretty much static, it won't ever be re-rendered because there are no changes to it's state.</p>
<h2 id="iwritablet">IWritable&lt;'T&gt;</h2>
<pre><code class="language-fsharp">type IWritable&lt;'value&gt; =
    inherit IReadable&lt;'value&gt;
    abstract member Set : 'value -&gt; unit
</code></pre>
<p>As is in the source comments:</p>
<blockquote>
<p>Readable and writable state value that can be subscribed to.</p>
</blockquote>
<p>If we take the previous example and add mutations it would look like the following:</p>
<pre><code class="language-fsharp">Component(fun ctx -&gt;
    let state = ctx.useState 0

    Button.create [
        Button.content $&quot;Count: {state.Current}&quot;
        Button.onClick (fun _ -&gt; state.Current + 1 |&gt; state.Set)
    ]
)
</code></pre>
<h3 id="passed-values">Passed Values</h3>
<p>Sometimes when you already have an <code>IWritable&lt;'T&gt;</code> value, you would like to use it on sibling components so they can show the same data in different formats, or just to communicate changes between different component trees without having to drill the values into the component's tree.</p>
<p>For that we can use Passed Values.</p>
<pre><code class="language-fsharp">
let ComponentA id (value: IWritable&lt;string&gt;) =
    Component(id, fun ctx -&gt;
        // Right here we can use ctx.usePassed to ensure we can both read/update a value
        let value = ctx.usePassed value
        StackPanel.create [
            StackPanel.children [
                TextBlock.create [
                    TextBlock.text $&quot;This component can read and update this value: \&quot;{value.Current}\&quot;&quot;
                ]
                Button.create [
                    Button.content &quot;Add 3&quot;
                    Button.onClick (fun _ -&gt; $&quot;{value.Current}3&quot; |&gt; value.Set )
                ]
            ]
        ]
    )

let ComponentB id (value: IReadable&lt;string&gt;) =
    Component(id, fun ctx -&gt;
        // Right here we can use ctx.usePassedRead to ensure we can only read a value
        let value = ctx.usePassedRead value
        StackPanel.create [
            StackPanel.children [
                TextBlock.create [
                    TextBlock.text $&quot;This component can only read this value: \&quot;{value.Current}\&quot;&quot;
                ]
            ]
        ]
    )

let View =
    Component(fun ctx -&gt;
        let value = ctx.useState &quot;This is my value&quot;
        StackPanel.create [
            StackPanel.spacing 12.
            StackPanel.children [
                // here we can use our components with the existing value
                // in other implementations these could also be called
                // &quot;Stores&quot;
                ComponentA &quot;component-a&quot; value
                ComponentB &quot;component-b&quot; value
                Button.create [
                    Button.content &quot;I can add 4 from outside&quot;
                    // since state is both readable and writable we can also
                    // modify the values from outside the child components
                    // as usual
                    Button.onClick (fun _ -&gt; $&quot;{value.Current}4&quot; |&gt; value.Set )
                ]
            ]
        ]
    )
</code></pre>

          </section>
        </article>
      </div>
    </main>
    <footer class="main-footer footer">
      <aside class="menu">
        <p class="menu-label">
          Guides
        </p>
        <ul class="menu-list">
          <li>
            <a href="guides/Home.html">
              Getting Started
            </a>
          </li>
          <li>
            <a href="guides/Basic-Template.html">
              Basic Template
            </a>
          </li>
          <li>
            <a href="guides/Full-Template.html">
              Full Template
            </a>
          </li>
          <li>
            <a href="guides/Quickstart-Template.html">
              Quickstart Template
            </a>
          </li>
          <li>
            <a href="guides/Views-and-Attributes.html">
              Views And Attributes
            </a>
          </li>
          <li>
            <a href="guides/Components.html">
              Components
            </a>
          </li>
          <li>
            <a href="guides/Unit-Testing-Avalonia-FuncUI-Apps.html">
              Unit Testing Avalonia.FuncUI
            </a>
          </li>
          <li>
            <a href="guides/Hooks.html">
              Hooks
            </a>
          </li>
          <li>
            <a href="guides/Bindings.html">
              How to create bindings
            </a>
          </li>
        </ul>
        <p class="menu-label">
          Documentation
        </p>
        <ul class="menu-list">
          <li>
            <a>
              Controls
            </a>
            <ul>
              <li>
                <a href="controls/Border.html">
                  Border
                </a>
              </li>
              <li>
                <a href="controls/Button.html">
                  Button
                </a>
              </li>
              <li>
                <a href="controls/Calendar.html">
                  Calendar
                </a>
              </li>
              <li>
                <a href="controls/CalendarDatePicker.html">
                  CalendarDatePicker
                </a>
              </li>
              <li>
                <a href="controls/CheckBox.html">
                  CheckBox
                </a>
              </li>
              <li>
                <a href="controls/DatePicker.html">
                  DatePicker
                </a>
              </li>
              <li>
                <a href="controls/DockPanel.html">
                  DockPanel
                </a>
              </li>
              <li>
                <a href="controls/Expander.html">
                  Expander
                </a>
              </li>
              <li>
                <a href="controls/ListBox.html">
                  ListBox
                </a>
              </li>
              <li>
                <a href="controls/Menu.html">
                  Menu
                </a>
              </li>
              <li>
                <a href="controls/NativeMenu.html">
                  NativeMenu
                </a>
              </li>
              <li>
                <a href="controls/NumericUpDown.html">
                  NumericUpDown
                </a>
              </li>
              <li>
                <a href="controls/ProgressBar.html">
                  ProgressBar
                </a>
              </li>
              <li>
                <a href="controls/RadioButton.html">
                  RadioButton
                </a>
              </li>
              <li>
                <a href="controls/RepeatButton.html">
                  RepeatButton
                </a>
              </li>
              <li>
                <a href="controls/Slider.html">
                  Slider
                </a>
              </li>
              <li>
                <a href="controls/StackPanel.html">
                  StackPanel
                </a>
              </li>
              <li>
                <a href="controls/Tabs.html">
                  TabControl
                </a>
              </li>
              <li>
                <a href="controls/TextBlock.html">
                  TextBlock
                </a>
              </li>
              <li>
                <a href="controls/TextBox.html">
                  TextBox
                </a>
              </li>
              <li>
                <a href="controls/TimePicker.html">
                  TimePicker
                </a>
              </li>
              <li>
                <a href="controls/ToggleButton.html">
                  ToggleButton
                </a>
              </li>
              <li>
                <a href="controls/ToggleSwitch.html">
                  ToggleSwitch
                </a>
              </li>
            </ul>
          </li>
        </ul>
        <p class="menu-label">
          Release Notes
        </p>
        <ul class="menu-list"></ul>
      </aside>
      <section class="content has-text-centered">
        <p>
          Avalonia.FuncUI
        </p>
      </section>
    </footer>
    <script src="/Avalonia.FuncUI.Docs/js/index.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.19.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.19.0/plugins/autoloader/prism-autoloader.min.js"></script>
  </body>
</html>